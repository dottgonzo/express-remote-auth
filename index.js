"use strict";
var remote_auth_1 = require("remote-auth");
var express = require("express");
function default_1(o) {
    var authmodule = new remote_auth_1.default({ secret: o.secret, app_id: o.app_id, couchdb: o.couchdb });
    var Router = express.Router();
    Router.get("/authorize/:provider/:user/:password", function (req, res) {
        var params = req.params;
        authmodule.authorize({ provider: params.provider, user: params.user, password: params.password }).then(function (a) {
            res.send(a);
        }).catch(function (err) {
            res.send({ error: err });
        });
    });
    return Router;
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = default_1;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSw0QkFBZ0IsYUFBYSxDQUFDLENBQUE7QUFFOUIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsbUJBQXlCLENBQXNEO0lBRTNFLElBQU0sVUFBVSxHQUFHLElBQUkscUJBQUcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUV2RixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7SUFHaEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxzQ0FBc0MsRUFBRSxVQUFDLEdBQUcsRUFBRSxHQUFHO1FBRXhELElBQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7UUFFMUIsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQyxDQUFDO1lBQ3JHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDZixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQyxHQUFHO1lBQ1QsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFDLEtBQUssRUFBQyxHQUFHLEVBQUMsQ0FBQyxDQUFBO1FBQ3pCLENBQUMsQ0FBQyxDQUFBO0lBR04sQ0FBQyxDQUFDLENBQUE7SUFFTixNQUFNLENBQUMsTUFBTSxDQUFBO0FBRWIsQ0FBQztBQXRCRDsyQkFzQkMsQ0FBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhdXQgZnJvbSBcInJlbW90ZS1hdXRoXCI7XG5cbmltcG9ydCAqIGFzIGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKG86IHsgc2VjcmV0OiBzdHJpbmcsIGFwcF9pZDogc3RyaW5nLCBjb3VjaGRiOiBzdHJpbmcgfSkge1xuXG4gICAgY29uc3QgYXV0aG1vZHVsZSA9IG5ldyBhdXQoeyBzZWNyZXQ6IG8uc2VjcmV0LCBhcHBfaWQ6IG8uYXBwX2lkLCBjb3VjaGRiOiBvLmNvdWNoZGIgfSk7XG5cbiAgICBjb25zdCBSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5cbiAgICBSb3V0ZXIuZ2V0KFwiL2F1dGhvcml6ZS86cHJvdmlkZXIvOnVzZXIvOnBhc3N3b3JkXCIsIChyZXEsIHJlcykgPT4ge1xuXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHJlcS5wYXJhbXM7XG5cbiAgICAgICAgYXV0aG1vZHVsZS5hdXRob3JpemUoeyBwcm92aWRlcjogcGFyYW1zLnByb3ZpZGVyLCB1c2VyOiBwYXJhbXMudXNlciwgcGFzc3dvcmQ6IHBhcmFtcy5wYXNzd29yZCB9KS50aGVuKChhKSA9PiB7XG4gICAgICAgICAgICByZXMuc2VuZChhKVxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICByZXMuc2VuZCh7ZXJyb3I6ZXJyfSlcbiAgICAgICAgfSlcblxuXG4gICAgfSlcblxucmV0dXJuIFJvdXRlclxuXG59XG5cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
